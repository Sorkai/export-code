# Change Log

本文档记录了 Export-Code 扩展的所有重要变更。

## [1.2.0] - 2025-12-03

### 🚀 重大更新 (Major Release)

#### 代码质量提升
- ✅ **修复 ESLint 严格检查错误** - 提高代码类型安全和可靠性
  - 修复 6 个 TypeScript/ESLint 严格类型检查错误
  - 添加正确的类型注解，移除不必要的 async 函数
  - 为 Promise 调用添加正确的错误处理标记
- 🔧 **升级 ESLint 至 v9** - 采用现代化 Flat Config 配置
  - 启用严格的 TypeScript 类型检查规则
  - 改进代码质量检查标准

#### 安全性增强
- 🔒 **修复 CodeQL 安全警告**
  - 修复正则表达式不完整多字符清理问题 (CWE-20, CWE-80, CWE-116)
  - 为 GitHub Actions workflows 添加显式权限声明，遵循最小权限原则
  - 提高代码注入防护能力

#### CI/CD 改进
- 🤖 **配置 Dependabot 自动依赖更新**
  - 自动检测并更新 npm 依赖
  - 自动更新 GitHub Actions 版本
  - 保持依赖始终处于最新安全状态
- ⚙️ **增强 CI 工作流**
  - 添加多 VS Code 版本矩阵测试
  - 支持 Ubuntu 24.04 兼容性
  - 添加依赖缓存，提升构建速度
  - 升级所有 GitHub Actions 到最新版本

#### 依赖更新
- 📦 **核心依赖升级**
  - TypeScript: 5.3.3 → 5.9.3
  - @types/node: 16.x → 24.10.1
  - @types/vscode: 1.85.0 → 1.106.1
  - glob: 旧版 → 10.5.0 (重构为现代 API)
  - ESLint: v8 → v9 (Flat Config)

### 🔧 开发体验
- 📝 完善测试套件，所有测试通过
- 🔍 改进代码可读性和维护性
- 🛡️ 提高整体代码安全性和健壮性

---

## [1.1.5] - 2025-12-02

### Fixed
- 🐛 修复 CodeQL 正则表达式警告：使用空格替换注释而非空字符串
- 🔒 改进字符串清理逻辑，避免潜在的注入风险

## [1.1.4] - 2025-12-02

### Security
- 🔒 修复 CodeQL 安全警告
- ⚙️ 为 GitHub Actions workflows 添加显式权限声明
- 🛡️ 改进正则表达式替换的字符串清理逻辑

## [1.1.3] - 2025-12-02

### Fixed
- 🐛 修复文件之间缺少空行分隔的问题
- 📝 优化输出格式，确保每个文件块之间都有清晰的空行

## [1.1.2] - 2025-12-02

### Changed
- 🔧 优化 GitHub Actions 自动化发布流程
- 🚀 统一使用 release 工作流，移除冗余的 publish 工作流

## [1.1.1] - 2025-12-02

### Added
- 📚 添加详细的插件更新发布教程文档
- 🤖 配置 GitHub Actions 自动化发布流程

### Changed
- ⚙️ 升级 Node.js 版本到 20.x 提高兼容性
- 🔧 优化 CI/CD 配置

## [1.1.0] - 2025-12-02

### Added
- ✨ 重大更新：导出的代码现在每个文件前会显示相对路径
- ✨ 文件之间自动添加空行分隔，提高可读性
- 🎯 插件重命名为 Export-Code，更符合实际功能
- 🌐 命令更新：`Export Code` (英文) 和 `导出代码` (中文)
- ⚙️ 配置项更新为 `exportCode.skipDirectories`

### Changed
- 📝 优化输出格式：每个文件前显示相对路径，文件间用空行分隔
- 🔧 命令 ID 从 `copyright-code.*` 更改为 `export-code.*`
- 📦 插件标识从 `copyright-code` 更改为 `export-code`

### Fixed
- 🐛 改进代码提取逻辑，确保文件路径正确显示

## [1.0.0] - 2023

### Added
- 🎉 初始发布
- 📤 支持提取项目代码到 txt 文件
- 🧹 自动去除注释和空行
- 🎯 支持多种编程语言（JS/TS, Java, Python, C/C++, HTML/CSS 等）
- 🔍 灵活的文件后缀选择
- 📁 可自定义排除目录和文件
- ⚙️ 支持通过设置配置排除项
- 🌏 支持多工作区文件夹
- 🔒 自动检测并跳过二进制文件