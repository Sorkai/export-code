# Export-Code æ’ä»¶æ›´æ–°å‘å¸ƒæ•™ç¨‹

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜å¦‚ä½•å‘å¸ƒå’Œæ›´æ–° Export-Code æ‰©å±•åˆ° VS Code Marketplaceã€‚

## ğŸ“‹ å‰ç½®å‡†å¤‡

### 1. ç¡®ä¿ç¯å¢ƒé…ç½®æ­£ç¡®

- âœ… Node.js å·²å®‰è£…ï¼ˆæ¨è 20.xï¼‰
- âœ… Git å·²é…ç½®
- âœ… GitHub ä»“åº“è®¿é—®æƒé™
- âœ… Azure DevOps Personal Access Token (PAT) å·²åˆ›å»ºå¹¶é…ç½®ä¸º GitHub Secret

### 2. éªŒè¯ GitHub Secret

è®¿é—®ï¼š`https://github.com/Sorkai/export-code/settings/secrets/actions`

ç¡®ä¿ `VSCE_PAT` å·²æ­£ç¡®é…ç½®ï¼š
- Name: `VSCE_PAT`
- Value: ä½ çš„ Azure DevOps Personal Access Token
- Scope: `Marketplace (Manage)`

---

## ğŸš€ å‘å¸ƒæ–°ç‰ˆæœ¬

### æ–¹æ³•ä¸€ï¼šè‡ªåŠ¨åŒ–å‘å¸ƒï¼ˆæ¨èï¼‰

ä½¿ç”¨æ–°çš„å‘å¸ƒè„šæœ¬è‡ªåŠ¨æ›´æ–°ç‰ˆæœ¬å·ã€åˆ›å»ºç­¾åæ ‡ç­¾å¹¶è§¦å‘ GitHub Actionsã€‚

#### è¡¥ä¸ç‰ˆæœ¬ï¼ˆBug ä¿®å¤ï¼‰

```powershell
# 1.1.3 â†’ 1.1.4
npm run release:patch
```

#### æ¬¡è¦ç‰ˆæœ¬ï¼ˆæ–°åŠŸèƒ½ï¼‰

```powershell
# 1.1.3 â†’ 1.2.0
npm run release:minor
```

#### ä¸»è¦ç‰ˆæœ¬ï¼ˆé‡å¤§æ›´æ–°ï¼‰

```powershell
# 1.1.3 â†’ 2.0.0
npm run release:major
```

#### æ¨é€åˆ° GitHub

```powershell
# æ¨é€ä»£ç å’Œæ ‡ç­¾ï¼ˆæ ‡ç­¾ä¼šè‡ªåŠ¨ç­¾åï¼‰
git push --follow-tags
```

**å®Œæˆï¼** GitHub Actions ä¼šè‡ªåŠ¨ï¼š
1. âœ… è¿è¡Œç¼–è¯‘
2. âœ… æ‰“åŒ…æ‰©å±•
3. âœ… åˆ›å»º GitHub Release
4. âœ… å‘å¸ƒåˆ° VS Code Marketplace

---

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨å‘å¸ƒ

å¦‚æœéœ€è¦æ›´ç²¾ç»†çš„æ§åˆ¶ï¼Œå¯ä»¥æ‰‹åŠ¨æ“ä½œã€‚

#### æ­¥éª¤ 1ï¼šæ›´æ–°ç‰ˆæœ¬å·

ç¼–è¾‘ `package.json`ï¼Œä¿®æ”¹ `version` å­—æ®µï¼š

```json
{
  "version": "1.1.2"
}
```

#### æ­¥éª¤ 2ï¼šæ›´æ–° CHANGELOG

ç¼–è¾‘ `CHANGELOG.md`ï¼Œæ·»åŠ æ–°ç‰ˆæœ¬çš„æ›´æ–°å†…å®¹ï¼š

```markdown
## [1.1.2] - 2025-12-02

### Fixed
- ä¿®å¤äº†æŸä¸ª bug

### Added
- æ·»åŠ äº†æ–°åŠŸèƒ½
```

#### æ­¥éª¤ 3ï¼šæäº¤æ›´æ”¹

```powershell
git add package.json CHANGELOG.md
git commit -m "chore: release v1.1.2"
```

#### æ­¥éª¤ 4ï¼šåˆ›å»ºæ ‡ç­¾

```powershell
git tag v1.1.2
```

#### æ­¥éª¤ 5ï¼šæ¨é€

```powershell
git push && git push --tags
```

---

## ğŸ“¦ æœ¬åœ°æµ‹è¯•

åœ¨æ¨é€æ ‡ç­¾å‰ï¼Œå»ºè®®å…ˆæœ¬åœ°æµ‹è¯•æ‰“åŒ…ï¼š

```powershell
# 1. å®‰è£…ä¾èµ–
npm install

# 2. ç¼–è¯‘ TypeScript
npm run compile

# 3. æ‰“åŒ…æˆ .vsix
npm run package

# 4. æœ¬åœ°å®‰è£…æµ‹è¯•
# åœ¨ VS Code ä¸­ï¼šæ‰©å±•è§†å›¾ â†’ ... â†’ ä» VSIX å®‰è£…
```

---

## ğŸ” æŸ¥çœ‹å‘å¸ƒçŠ¶æ€

### GitHub Actions

è®¿é—®ï¼š`https://github.com/Sorkai/export-code/actions`

- æŸ¥çœ‹å·¥ä½œæµè¿è¡ŒçŠ¶æ€
- æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
- ä¸‹è½½ç”Ÿæˆçš„ .vsix æ–‡ä»¶

### VS Code Marketplace

è®¿é—®ï¼š`https://marketplace.visualstudio.com/manage/publishers/sorkai`

- æŸ¥çœ‹å‘å¸ƒçŠ¶æ€
- æŸ¥çœ‹å®‰è£…é‡å’Œè¯„åˆ†
- ç®¡ç†æ‰©å±•

---

## âš ï¸ å¸¸è§é—®é¢˜

### Q1: ç‰ˆæœ¬å·å·²å­˜åœ¨é”™è¯¯

**é”™è¯¯**ï¼š`ERROR sorkai.export-code v1.1.1 already exists.`

**è§£å†³**ï¼š
```powershell
# é€’å¢ç‰ˆæœ¬å·
npm run release:patch
git push --follow-tags
```

### Q2: GitHub Actions å¤±è´¥

**æ£€æŸ¥**ï¼š
1. è®¿é—® Actions é¡µé¢æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
2. ç¡®è®¤ `VSCE_PAT` Secret æ˜¯å¦æ­£ç¡®
3. ç¡®è®¤ PAT æ˜¯å¦è¿‡æœŸ

**é‡æ–°è§¦å‘**ï¼š
```powershell
# åˆ é™¤æ ‡ç­¾
git tag -d v1.1.1
git push origin :refs/tags/v1.1.1

# é‡æ–°åˆ›å»º
git tag v1.1.1
git push origin v1.1.1
```

### Q3: æœ¬åœ°æµ‹è¯•æ—¶æ‰“åŒ…å¤±è´¥

**è§£å†³**ï¼š
```powershell
# æ¸…ç†å¹¶é‡æ–°å®‰è£…ä¾èµ–
rm -rf node_modules package-lock.json
npm install

# é‡æ–°ç¼–è¯‘
npm run compile

# æ‰“åŒ…
npm run package
```

---

## ğŸ“ ç‰ˆæœ¬å·è§„èŒƒ

éµå¾ª [è¯­ä¹‰åŒ–ç‰ˆæœ¬](https://semver.org/lang/zh-CN/) è§„èŒƒï¼š

- **ä¸»ç‰ˆæœ¬å·ï¼ˆMajorï¼‰**: ä¸å…¼å®¹çš„ API ä¿®æ”¹
- **æ¬¡ç‰ˆæœ¬å·ï¼ˆMinorï¼‰**: å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢
- **ä¿®è®¢å·ï¼ˆPatchï¼‰**: å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£

ç¤ºä¾‹ï¼š
- `1.0.0` â†’ `1.0.1`ï¼šä¿®å¤ bug
- `1.0.0` â†’ `1.1.0`ï¼šæ·»åŠ æ–°åŠŸèƒ½
- `1.0.0` â†’ `2.0.0`ï¼šé‡å¤§æ›´æ–°

---

## ğŸ”„ å‘å¸ƒæµç¨‹å›¾

```
å¼€å‘å®Œæˆ
    â†“
æœ¬åœ°æµ‹è¯•
    â†“
æ›´æ–° CHANGELOG
    â†“
npm run release:patch/minor/major
    â†“
git push --follow-tags
    â†“
GitHub Actions è‡ªåŠ¨è¿è¡Œ
    â†“
å‘å¸ƒåˆ° Marketplace
    â†“
ç”¨æˆ·è‡ªåŠ¨æ”¶åˆ°æ›´æ–°
```

---

## ğŸ› ï¸ å¿«é€Ÿå‘½ä»¤å‚è€ƒ

```powershell
# æŸ¥çœ‹å½“å‰ç‰ˆæœ¬
npm version

# å‘å¸ƒè¡¥ä¸ç‰ˆæœ¬ï¼ˆæ¨èä½¿ç”¨ï¼‰
npm run release:patch && git push --follow-tags

# å‘å¸ƒæ¬¡è¦ç‰ˆæœ¬
npm run release:minor && git push --follow-tags

# å‘å¸ƒä¸»è¦ç‰ˆæœ¬
npm run release:major && git push --follow-tags

# æœ¬åœ°æ‰“åŒ…æµ‹è¯•
npm run package

# æŸ¥çœ‹å·²æœ‰æ ‡ç­¾
git tag -l

# åˆ é™¤æœ¬åœ°æ ‡ç­¾
git tag -d v1.1.1

# åˆ é™¤è¿œç¨‹æ ‡ç­¾
git push origin :refs/tags/v1.1.1
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [VS Code æ‰©å±•å‘å¸ƒæ–‡æ¡£](https://code.visualstudio.com/api/working-with-extensions/publishing-extension)
- [GitHub Actions æ–‡æ¡£](https://docs.github.com/actions)
- [è¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒ](https://semver.org/lang/zh-CN/)
- [é¡¹ç›® GitHub ä»“åº“](https://github.com/Sorkai/export-code)

---

## âœ… å‘å¸ƒæ£€æŸ¥æ¸…å•

å‘å¸ƒå‰è¯·ç¡®è®¤ï¼š

- [ ] æ‰€æœ‰ä»£ç å·²æäº¤
- [ ] æœ¬åœ°æµ‹è¯•é€šè¿‡
- [ ] CHANGELOG.md å·²æ›´æ–°
- [ ] ç‰ˆæœ¬å·ç¬¦åˆè¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒ
- [ ] package.json ç‰ˆæœ¬å·ä¸ Git æ ‡ç­¾ä¸€è‡´
- [ ] `VSCE_PAT` Secret æœªè¿‡æœŸ
- [ ] README.md åæ˜ æœ€æ–°åŠŸèƒ½

---

**ç¥å‘å¸ƒé¡ºåˆ©ï¼** ğŸ‰

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ [GitHub Issues](https://github.com/Sorkai/export-code/issues) æˆ–è”ç³»ç»´æŠ¤è€…ã€‚